"use strict";
var CarouzelNXT;
!(function (t) {
  function e() {
    n && clearTimeout(n),
      (n = setTimeout(function () {
        Object.keys(l).forEach(function (t) {
          l[t] && f(l[t]);
        });
      }, 100));
  }
  function p(t, e) {
    return v(t, e)[0];
  }
  function r(t, e) {
    t.removeAttribute(e);
  }
  function i(t, e) {
    if ("object" != typeof t || "object" != typeof e) return e;
    for (var n in e)
      e[n] instanceof Array
        ? ((t[n] && t[n] instanceof Array) || (t[n] = []),
          (t[n] = t[n].concat(e[n])))
        : e[n] instanceof Object
        ? ((t[n] && t[n] instanceof Object) || (t[n] = {}),
          (t[n] = i(t[n], e[n])))
        : (t[n] = e[n]);
    return t;
  }
  function f(e) {
    var n = e.o.bps
      .filter(function (t) {
        return c.innerWidth >= t.minW;
      })
      .pop();
    ((n =
      n ||
      e.o.bps.filter(function (t) {
        return 0 === t.minW;
      })[0])._arrows
      ? b
      : g)(e.$arrowsWrap, h.hiddenCls),
      (n._nav ? b : g)(e.$navWrap, h.hiddenCls),
      (a = []),
      (e.pts = []),
      (e.scrlWidth = _(e.$, e.$).width),
      (e.slideWidth = e.scrlWidth / n._2Show),
      v(e.$track, "".concat(h.$group)).forEach(function (t) {
        x(t);
      }),
      e.isVertical
        ? ((e.$track.style.height = n.verH + h.px),
          e.$slides.forEach(function (t) {
            n && (t.style.height = n.verH / n._2Show + h.px);
          }))
        : e.$slides.forEach(function (t) {
            t.style.width = e.slideWidth + h.px;
          });
    for (var t = 0; t < e.$slides.length; t += n._2Scroll)
      a.push(e.$slides.slice(t, t + n._2Scroll));
    a.forEach(function (t) {
      (o = document.createElement("div")),
        d(o, h.$group.slice(1, -1), "true"),
        w(t, o),
        e.isVertical
          ? e.pts.push(
              e.isRtl ? _(e.$trackMask, o).bottom : _(e.$trackMask, o).top
            )
          : e.pts.push(
              e.isRtl ? _(e.$trackMask, o).right : _(e.$trackMask, o).left
            );
    });
  }
  function s(t, e) {
    var n, r, o, a, i, s, l, c, u, d;
    return (
      (i = e),
      (s = Object.keys(i)),
      (l = Object.keys($)),
      (c = []),
      (u = []),
      (d = []),
      !(
        s.filter(function (t) {
          return -1 === l.indexOf(t);
        }).length ||
        (null != (s = i.breakpoints) &&
          s.forEach(function (t) {
            t.minWidth && c.push(t.minWidth);
          }),
        null != c &&
          c.forEach(function (t) {
            (d.includes(t) && !u.includes(t) ? u : d).push(t);
          }),
        0 < u.length)
      ) &&
      ("function" == typeof e.beforeInitFn && e.beforeInitFn(),
      (t = {
        $: t,
        $arrowsWrap: p(t, h.$arrowsWrapper),
        $curPage: p(t, h.$currentPage),
        $nav: p(t, h.$nav),
        $navWrap: p(t, h.$navWrapper),
        $nextBtn: p(t, h.$nextBtn),
        $pageWrap: p(t, h.$pageWrapper),
        $prevBtn: p(t, h.$prevBtn),
        $slides: v(t, h.$slide),
        $totPage: p(t, h.$totalPages),
        $track: p(t, h.$track),
        $trackMask: p(t, h.$trackMask),
        eH: [],
        enableNextBtn: !1,
        enablePrevBtn: !1,
        isKeydown: !1,
        isMousedown: !1,
        isRtl: !1,
        isVertical: !1,
        o:
          ((i = {
            _2Scroll: (r = e).slidesToScroll,
            _2Show: r.slidesToShow,
            _arrows: r.showArrows,
            _nav: r.showNavigation,
            _urlH: r.trackUrlHash,
            aSFn: r.afterScrollFn,
            auto: r.autoplay,
            bps: [],
            bSFn: r.beforeScrollFn,
            cntr: r.centerBetween,
            effect: r.effect,
            gutr: r.slideGutter,
            inf: r.isInfinite,
            pauseHov: r.pauseOnHover,
            scbar: r.showScrollbar,
            startAt: r.startAt,
            useTitle: r.useTitlesAsDots,
            verH: r.verticalHeight,
          }),
          (s = h.effects.filter(function (t) {
            return t.name === r.effect;
          })[0]),
          (i.effect = s.cls || h.effects[0].cls),
          (s = {
            _2Scroll: r.slidesToScroll,
            _2Show: r.slidesToShow,
            _arrows: r.showArrows,
            _nav: r.showNavigation,
            cntr: r.centerBetween,
            dots: [],
            gutr: r.slideGutter,
            minW: 0,
            nDups: [],
            pDups: [],
            scbar: r.showScrollbar,
            verH: r.verticalHeight,
          }),
          r.breakpoints && 0 < r.breakpoints.length
            ? ((t = r.breakpoints.sort(function (t, e) {
                return t.minWidth - e.minWidth;
              })),
              (o = 0),
              (a = []).push(s),
              t.forEach(function (t, e) {
                (0 === t.minWidth && 0 === e) ||
                  (a.push({
                    _2Scroll: t.slidesToScroll || a[o]._2Scroll,
                    _2Show: t.slidesToShow || a[o]._2Show,
                    _arrows: t.showArrows || a[o]._arrows,
                    _nav: t.showNavigation || a[o]._nav,
                    cntr: t.centerBetween || a[o].cntr,
                    gutr: t.slideGutter || a[o].gutr,
                    minW: t.minWidth,
                    scbar: t.showScrollbar || a[o].scbar,
                    verH: t.verticalHeight || a[o].verH,
                  }),
                  o++);
              }),
              (i.bps = a.sort(function (t, e) {
                return t.minW - e.minW;
              })))
            : i.bps.push(s),
          i.effect === h.effects[1].cls &&
            ((i.scbar = !1),
            i.bps.forEach(function (t) {
              t.scbar = !1;
            })),
          i),
        pts: [],
        scrlWidth: 0,
        slideWidth: 0,
      }).$arrowsWrap) &&
      t.$curPage &&
      t.$nav &&
      t.$navWrap &&
      t.$nextBtn &&
      t.$pageWrap &&
      t.$prevBtn &&
      t.$totPage &&
      t.$track &&
      t.$trackMask
        ? ("string" == typeof (s = t.$.getAttribute(h.$rtl.slice(1, -1))) &&
            -1 < s.length &&
            (t.isRtl = !0),
          "string" == typeof (i = t.$.getAttribute(h.$vertical.slice(1, -1))) &&
            -1 < i.length &&
            (t.isVertical = !0),
          (t.o.auto ? g : b)(t.$, h.autoplayCls),
          (t.$track.tabIndex = 0),
          g((n = t).$, n.o.effect),
          g(n.$arrowsWrap, h.hiddenCls),
          g(n.$navWrap, h.hiddenCls),
          g(n.$pageWrap, h.hiddenCls),
          m("next", !0, n),
          m("prev", !0, n),
          n.eH.push(
            k(n.$track, "mousedown", function () {
              n.isMousedown = !0;
            })
          ),
          n.eH.push(
            k(n.$track, "mouseup", function (t) {
              (n.isMousedown = !1), y(t, n);
            })
          ),
          n.eH.push(
            k(n.$track, "keydown", function () {
              n.isKeydown = !0;
            })
          ),
          n.eH.push(
            k(n.$track, "keyup", function (t) {
              (n.isKeydown = !1), y(t, n);
            })
          ),
          f(t),
          "function" == typeof e.afterInitFn && e.afterInitFn(),
          t)
        : null
    );
  }
  var o,
    n,
    h = {
      _v: "1.0.0",
      $arrowsWrapper: "[data-carouzelnxt-arrowswrapper]",
      $currentPage: "[data-carouzelnxt-currentpage]",
      $global: "[data-carouzelnxt-auto]",
      $group: "[data-carouzelnxt-group]",
      $nav: "[data-carouzelnxt-navigation]",
      $navWrapper: "[data-carouzelnxt-navigationwrapper]",
      $nextBtn: "[data-carouzelnxt-nextarrow]",
      $pageWrapper: "[data-carouzelnxt-pageinfo]",
      $prevBtn: "[data-carouzelnxt-previousarrow]",
      $rtl: "[data-carouzelnxt-rtl]",
      $slide: "[data-carouzelnxt-slide]",
      $totalPages: "[data-carouzelnxt-totalpages]",
      $track: "[data-carouzelnxt-track]",
      $trackMask: "[data-carouzelnxt-trackmask]",
      $vertical: "[data-carouzelnxt-vertical]",
      activeCls: "__carouzelnxt-active",
      autoplayCls: "__carouzelnxt-autoplay",
      disabledCls: "__carouzelnxt-disabled",
      dotIndexCls: "__carouzelnxt-dot",
      dotTitleCls: "__carouzelnxt-dot-title",
      duplicateCls: "__carouzelnxt-duplicate",
      effects: [
        { name: "scroll", cls: "__carouzelnxt-scroll" },
        { name: "fade", cls: "__carouzelnxt-fade" },
      ],
      hiddenCls: "__carouzelnxt-hidden",
      hideScbCls: "__carouzelnxt-scbhidden",
      idPrefix: "__carouzelnxt",
      nDirectionCls: "__carouzelnxt-to-next",
      pDirectionCls: "__carouzelnxt-to-previous",
      px: "px",
      useCapture: !1,
    },
    l = {},
    c = window,
    u = 0,
    a = [],
    $ = {
      afterInitFn: void 0,
      afterScrollFn: void 0,
      animationSpeed: 5e3,
      autoplay: !1,
      beforeInitFn: void 0,
      beforeScrollFn: void 0,
      breakpoints: [],
      centerBetween: 0,
      effect: "scroll",
      isInfinite: !0,
      pauseOnHover: !1,
      showArrows: !0,
      showNavigation: !0,
      showScrollbar: !0,
      slideGutter: 0,
      slidesToScroll: 1,
      slidesToShow: 1,
      startAt: 0,
      trackUrlHash: !1,
      useTitlesAsDots: !1,
      verticalHeight: 500,
    },
    v = function (t, e) {
      return Array.prototype.slice.call(t.querySelectorAll(e) || []);
    },
    g = function (t, e) {
      (t = t.classList).add.apply(t, e.split(" "));
    },
    b = function (t, e) {
      (t = t.classList).remove.apply(t, e.split(" "));
    },
    d = function (t, e, n) {
      t.setAttribute(e, n);
    },
    w = function (t, e) {
      t.length && t[0].parentNode && t[0].parentNode.insertBefore(e, t[0]),
        t.forEach(function (t) {
          e.appendChild(t);
        });
    },
    x = function (t) {
      if (t && t.parentNode) {
        for (; t.firstChild; ) t.parentNode.insertBefore(t.firstChild, t);
        t.remove();
      }
    },
    _ = function (t, e) {
      (t = t.getBoundingClientRect()), (e = e.getBoundingClientRect());
      return {
        bottom: e.bottom - t.bottom,
        height: e.height,
        left: e.left - t.left,
        right: e.right - t.right,
        top: e.top - t.top,
        width: e.width,
        x: e.x - t.x,
        y: e.y - t.y,
      };
    },
    k = function (t, e, n) {
      var r = {
        element: t,
        remove: function () {
          t.removeEventListener(e, n, h.useCapture);
        },
      };
      return t.addEventListener(e, n, h.useCapture), r;
    },
    y = function (t, e) {
      t instanceof KeyboardEvent &&
        console.log("================", t.key, _(e.$, e.$track));
    },
    m = function (t, e, n) {
      "next" === t &&
        (e
          ? (g(n.$nextBtn, h.disabledCls),
            d(n.$nextBtn, "disabled", "disabled"))
          : (b(n.$nextBtn, h.disabledCls), r(n.$nextBtn, "disabled"))),
        "prev" === t &&
          (e
            ? (g(n.$prevBtn, h.disabledCls),
              d(n.$prevBtn, "disabled", "disabled"))
            : (b(n.$prevBtn, h.disabledCls), r(n.$prevBtn, "disabled")));
    },
    S =
      ((W.getInstance = function () {
        return (W.instance = W.instance ? W.instance : new W());
      }),
      (W.prototype.initGlobal = function () {
        this.init(!0, "");
      }),
      (W.prototype.init = function (t, n) {
        var r,
          o = [],
          a = "boolean" == typeof t && t;
        return (
          v(document, a ? h.$global : t.toString()).forEach(function (t) {
            var e =
              t.getAttribute("id") ||
              ""
                .concat(h.idPrefix, "_")
                .concat(new Date().getTime(), "_root_")
                .concat(u++);
            d(t, "id", e),
              !l[e] &&
                ((r = a
                  ? JSON.parse(
                      (t.getAttribute(h.$global.slice(1, -1)) || "").replace(
                        /'/g,
                        '"'
                      )
                    )
                  : n || {}),
                (t = s(t, i($, r)))) &&
                o.push((l[e] = t));
          }),
          c.addEventListener("resize", e, h.useCapture),
          {
            addSlide: function (t) {
              console.log("=========================addslide", t);
            }.bind(this, o),
            destroy: function (t) {
              console.log("=========================destroy", t);
            }.bind(this, o),
            removeSlide: function (t) {
              console.log("=========================removeslide", t);
            }.bind(this, o),
          }
        );
      }),
      W);
  function W() {}
  S.getInstance().initGlobal(),
    (t.version = h._v),
    (t.init = S.getInstance().init);
})((CarouzelNXT = CarouzelNXT || {}));
