"use strict";
var CarouzelNXT;
!(function (t) {
  function e() {
    n && clearTimeout(n),
      (n = setTimeout(function () {
        Object.keys(u).forEach(function (t) {
          u[t] && v(u[t]);
        });
      }, 100));
  }
  function h(t, e) {
    return x(t, e)[0];
  }
  function a(t, e) {
    if ("object" != typeof t || "object" != typeof e) return e;
    for (var n in e)
      e[n] instanceof Array
        ? ((t[n] && t[n] instanceof Array) || (t[n] = []),
          (t[n] = t[n].concat(e[n])))
        : e[n] instanceof Object
        ? ((t[n] && t[n] instanceof Object) || (t[n] = {}),
          (t[n] = a(t[n], e[n])))
        : (t[n] = e[n]);
    return t;
  }
  function v(e) {
    var n = e.o.bps
      .filter(function (t) {
        return d.innerWidth >= t.minW;
      })
      .pop();
    ((n =
      n ||
      e.o.bps.filter(function (t) {
        return 0 === t.minW;
      })[0])._arrows
      ? y
      : S)(e.$arrowsWrap, _),
      (n._nav ? y : S)(e.$navWrap, _),
      (p = []),
      (e.pts = []),
      (e.scrlWidth = H(e.$, e.$).width),
      (e.slideWidth = e.scrlWidth / n._2Show),
      x(e.$track, "".concat(r)).forEach(function (t) {
        B(t);
      }),
      e.isVertical
        ? ((e.$track.style.height = n.verH + l),
          e.$slides.forEach(function (t) {
            n && (t.style.height = n.verH / n._2Show + l);
          }))
        : e.$slides.forEach(function (t) {
            t.style.width = e.slideWidth + l;
          });
    for (var t = 0; t < e.$slides.length; t += n._2Scroll)
      p.push(e.$slides.slice(t, t + n._2Scroll));
    p.forEach(function (t) {
      (o = document.createElement("div")),
        W(o, r.slice(1, -1), "true"),
        A(t, o),
        e.isVertical
          ? e.pts.push(
              e.isRtl ? H(e.$trackMask, o).bottom : H(e.$trackMask, o).top
            )
          : e.pts.push(
              e.isRtl ? H(e.$trackMask, o).right : H(e.$trackMask, o).left
            );
    });
  }
  function s(t, e) {
    var n, o, r, i, a, s, c, l, u, d, f, p;
    return (
      (c = e),
      (l = Object.keys(c)),
      (u = Object.keys(m)),
      (d = []),
      (f = []),
      (p = []),
      !(
        l.filter(function (t) {
          return -1 === u.indexOf(t);
        }).length ||
        (null != (l = c.breakpoints) &&
          l.forEach(function (t) {
            t.minWidth && d.push(t.minWidth);
          }),
        null != d &&
          d.forEach(function (t) {
            (p.includes(t) && !f.includes(t) ? f : p).push(t);
          }),
        0 < f.length)
      ) &&
      ("function" == typeof e.beforeInitFn && e.beforeInitFn(),
      (t = {
        $: t,
        $arrowsWrap: h(t, "[data-carouzelnxt-arrowswrapper]"),
        $curPage: h(t, "[data-carouzelnxt-currentpage]"),
        $nav: { el: h(t, "[data-carouzelnxt-navigation]"), isActive: !1 },
        $navWrap: h(t, "[data-carouzelnxt-navigationwrapper]"),
        $nextBtn: { el: h(t, "[data-carouzelnxt-nextarrow]"), isActive: !1 },
        $pageWrap: h(t, "[data-carouzelnxt-pageinfo]"),
        $prevBtn: {
          el: h(t, "[data-carouzelnxt-previousarrow]"),
          isActive: !1,
        },
        $slides: x(t, "[data-carouzelnxt-slide]"),
        $totPage: h(t, "[data-carouzelnxt-totalpages]"),
        $track: h(t, "[data-carouzelnxt-track]"),
        $trackMask: h(t, "[data-carouzelnxt-trackmask]"),
        eH: [],
        isKeydown: !1,
        isMousedown: !1,
        isRtl: !1,
        isVertical: !1,
        o:
          ((c = {
            _2Scroll: (i = e).slidesToScroll,
            _2Show: i.slidesToShow,
            _arrows: i.showArrows,
            _nav: i.showNavigation,
            _urlH: i.trackUrlHash,
            aSFn: i.afterScrollFn,
            auto: i.autoplay,
            bps: [],
            bSFn: i.beforeScrollFn,
            cntr: i.centerBetween,
            effect: i.effect,
            gutr: i.slideGutter,
            inf: i.isInfinite,
            pauseHov: i.pauseOnHover,
            scbar: i.showScrollbar,
            startAt: i.startAt,
            useTitle: i.useTitlesAsDots,
            verH: i.verticalHeight,
          }),
          (l = b.filter(function (t) {
            return t.name === i.effect;
          })[0]),
          (c.effect = l.cls || b[0].cls),
          (l = {
            _2Scroll: i.slidesToScroll,
            _2Show: i.slidesToShow,
            _arrows: i.showArrows,
            _nav: i.showNavigation,
            cntr: i.centerBetween,
            dots: [],
            gutr: i.slideGutter,
            minW: 0,
            nDups: [],
            pDups: [],
            scbar: i.showScrollbar,
            verH: i.verticalHeight,
          }),
          i.breakpoints && 0 < i.breakpoints.length
            ? ((t = i.breakpoints.sort(function (t, e) {
                return t.minWidth - e.minWidth;
              })),
              (a = 0),
              (s = []).push(l),
              t.forEach(function (t, e) {
                (0 === t.minWidth && 0 === e) ||
                  (s.push({
                    _2Scroll: t.slidesToScroll || s[a]._2Scroll,
                    _2Show: t.slidesToShow || s[a]._2Show,
                    _arrows: t.showArrows || s[a]._arrows,
                    _nav: t.showNavigation || s[a]._nav,
                    cntr: t.centerBetween || s[a].cntr,
                    gutr: t.slideGutter || s[a].gutr,
                    minW: t.minWidth,
                    scbar: t.showScrollbar || s[a].scbar,
                    verH: t.verticalHeight || s[a].verH,
                  }),
                  a++);
              }),
              (c.bps = s.sort(function (t, e) {
                return t.minW - e.minW;
              })))
            : c.bps.push(l),
          c.effect === b[1].cls &&
            ((c.scbar = !1),
            c.bps.forEach(function (t) {
              t.scbar = !1;
            })),
          c),
        pts: [],
        scrlWidth: 0,
        slideWidth: 0,
      }).$arrowsWrap) &&
      t.$curPage &&
      t.$nav &&
      t.$navWrap &&
      t.$nextBtn &&
      t.$pageWrap &&
      t.$prevBtn &&
      t.$totPage &&
      t.$track &&
      t.$trackMask
        ? ("string" ==
            typeof (l = t.$.getAttribute(
              "[data-carouzelnxt-rtl]".slice(1, -1)
            )) &&
            -1 < l.length &&
            (t.isRtl = !0),
          "string" ==
            typeof (c = t.$.getAttribute(
              "[data-carouzelnxt-vertical]".slice(1, -1)
            )) &&
            -1 < c.length &&
            (t.isVertical = !0),
          (t.o.auto ? S : y)(t.$, $),
          (t.$track.tabIndex = 0),
          (o = t).o.bps.forEach(function (e) {
            (e.pDups = []),
              (e.nDups = []),
              o.$slides.slice(0, e._2Show).forEach(function (t) {
                (r = t.cloneNode(!0)), S(r, w), z(r, "id"), e.nDups.push(r);
              }),
              o.$slides.slice(-e._2Show).forEach(function (t) {
                (r = t.cloneNode(!0)), S(r, w), z(r, "id"), e.pDups.push(r);
              });
          }),
          S((n = t).$, n.o.effect),
          S(n.$arrowsWrap, _),
          S(n.$navWrap, _),
          S(n.$pageWrap, _),
          N(g.n, n, !1),
          N(g.p, n, !1),
          n.eH.push(
            E(n.$nextBtn.el, k.c, function (t) {
              D(t, n);
            })
          ),
          n.eH.push(
            E(n.$prevBtn.el, k.c, function (t) {
              M(t, n);
            })
          ),
          n.eH.push(
            E(n.$track, k.md, function () {
              n.isMousedown = !0;
            })
          ),
          n.eH.push(
            E(n.$track, k.mu, function (t) {
              (n.isMousedown = !1), T(t, n);
            })
          ),
          n.eH.push(
            E(n.$track, k.kd, function () {
              n.isKeydown = !0;
            })
          ),
          n.eH.push(
            E(n.$track, k.ku, function (t) {
              (n.isKeydown = !1), T(t, n);
            })
          ),
          v(t),
          "function" == typeof e.afterInitFn && e.afterInitFn(),
          t)
        : null
    );
  }
  var o,
    n,
    c = "[data-carouzelnxt-auto]",
    r = "[data-carouzelnxt-group]",
    $ = "__carouzelnxt-autoplay",
    g = { n: "next", p: "prev" },
    i = "__carouzelnxt-disabled",
    w = "__carouzelnxt-duplicate",
    b = [
      { name: "scroll", cls: "__carouzelnxt-scroll" },
      { name: "fade", cls: "__carouzelnxt-fade" },
    ],
    k = {
      c: "click",
      kd: "keydown",
      ku: "keyup",
      md: "mousedown",
      mu: "mouseup",
      t: "tab",
    },
    _ = "__carouzelnxt-hidden",
    l = "px",
    u = {},
    d = window,
    f = 0,
    p = [],
    m = {
      afterInitFn: void 0,
      afterScrollFn: void 0,
      animationSpeed: 5e3,
      autoplay: !1,
      beforeInitFn: void 0,
      beforeScrollFn: void 0,
      breakpoints: [],
      centerBetween: 0,
      effect: "scroll",
      isInfinite: !0,
      pauseOnHover: !1,
      showArrows: !0,
      showNavigation: !0,
      showScrollbar: !0,
      slideGutter: 0,
      slidesToScroll: 1,
      slidesToShow: 1,
      startAt: 0,
      trackUrlHash: !1,
      useTitlesAsDots: !1,
      verticalHeight: 500,
    },
    x = function (t, e) {
      return Array.prototype.slice.call(t.querySelectorAll(e) || []);
    },
    S = function (t, e) {
      (t = t.classList).add.apply(t, e.split(" "));
    },
    y = function (t, e) {
      (t = t.classList).remove.apply(t, e.split(" "));
    },
    W = function (t, e, n) {
      t.setAttribute(e, n);
    },
    z = function (t, e) {
      t.removeAttribute(e);
    },
    A = function (t, e) {
      t.length && t[0].parentNode && t[0].parentNode.insertBefore(e, t[0]),
        t.forEach(function (t) {
          e.appendChild(t);
        });
    },
    B = function (t) {
      if (t && t.parentNode) {
        for (; t.firstChild; ) t.parentNode.insertBefore(t.firstChild, t);
        t.remove();
      }
    },
    H = function (t, e) {
      (t = t.getBoundingClientRect()), (e = e.getBoundingClientRect());
      return {
        bottom: e.bottom - t.bottom,
        height: e.height,
        left: e.left - t.left,
        right: e.right - t.right,
        top: e.top - t.top,
        width: e.width,
        x: e.x - t.x,
        y: e.y - t.y,
      };
    },
    E = function (t, e, n) {
      var o = {
        element: t,
        remove: function () {
          t.removeEventListener(e, n, !1);
        },
      };
      return t.addEventListener(e, n, !1), o;
    },
    T = function (t, e) {
      t instanceof KeyboardEvent &&
        console.log("================", t.key, H(e.$, e.$track));
    },
    N = function (t, e, n) {
      void 0 === n && (n = !1),
        t === g.n
          ? (e.$nextBtn.isActive = n)
            ? (y(e.$nextBtn.el, i), z(e.$nextBtn.el, "disabled"))
            : (S(e.$nextBtn.el, i), W(e.$nextBtn.el, "disabled", "disabled"))
          : t === g.p &&
            ((e.$prevBtn.isActive = n)
              ? (y(e.$prevBtn.el, i), z(e.$prevBtn.el, "disabled"))
              : (S(e.$prevBtn.el, i),
                W(e.$prevBtn.el, "disabled", "disabled")));
    },
    D = function (t, e) {
      e.$nextBtn.isActive &&
        (t.preventDefault(), console.log("==========next"));
    },
    M = function (t, e) {
      e.$prevBtn.isActive &&
        (t.preventDefault(), console.log("==========prev"));
    },
    F =
      ((I.getInstance = function () {
        return (I.instance = I.instance ? I.instance : new I());
      }),
      (I.prototype.initGlobal = function () {
        this.init(!0, "");
      }),
      (I.prototype.init = function (t, n) {
        var o,
          r = [],
          i = "boolean" == typeof t && t;
        return (
          x(document, i ? c : t.toString()).forEach(function (t) {
            var e =
              t.getAttribute("id") ||
              ""
                .concat("__carouzelnxt", "_")
                .concat(new Date().getTime(), "_root_")
                .concat(f++);
            W(t, "id", e),
              !u[e] &&
                ((o = i
                  ? JSON.parse(
                      (t.getAttribute(c.slice(1, -1)) || "").replace(/'/g, '"')
                    )
                  : n || {}),
                (t = s(t, a(m, o)))) &&
                r.push((u[e] = t));
          }),
          d.addEventListener("resize", e, !1),
          {
            addSlide: function (t) {
              console.log("=========================addslide", t);
            }.bind(this, r),
            destroy: function (t) {
              console.log("=========================destroy", t);
            }.bind(this, r),
            removeSlide: function (t) {
              console.log("=========================removeslide", t);
            }.bind(this, r),
          }
        );
      }),
      I);
  function I() {}
  F.getInstance().initGlobal(),
    (t.version = "1.0.0"),
    (t.init = F.getInstance().init);
})((CarouzelNXT = CarouzelNXT || {}));
