"use strict";
var CarouzelNXT;
!(function (t) {
  function e() {
    n && clearTimeout(n),
      (n = setTimeout(function () {
        Object.keys(d).forEach(function (t) {
          d[t] && p(d[t]);
        });
      }, 100));
  }
  function f(t, e) {
    return _(t, e)[0];
  }
  function r(t, e) {
    t.removeAttribute(e);
  }
  function a(t, e) {
    if ("object" != typeof t || "object" != typeof e) return e;
    for (var n in e)
      e[n] instanceof Array
        ? ((t[n] && t[n] instanceof Array) || (t[n] = []),
          (t[n] = t[n].concat(e[n])))
        : e[n] instanceof Object
        ? ((t[n] && t[n] instanceof Object) || (t[n] = {}),
          (t[n] = a(t[n], e[n])))
        : (t[n] = e[n]);
    return t;
  }
  function p(e) {
    var n = e.o.bps
      .filter(function (t) {
        return w.innerWidth >= t.minW;
      })
      .pop();
    ((n =
      n ||
      e.o.bps.filter(function (t) {
        return 0 === t.minW;
      })[0])._arrows
      ? S
      : y)(e.$arrowsWrap, b),
      (n._nav ? S : y)(e.$navWrap, b),
      (m = []),
      (e.pts = []),
      (e.scrlWidth = z(e.$, e.$).width),
      (e.slideWidth = e.scrlWidth / n._2Show),
      _(e.$track, "".concat(i)).forEach(function (t) {
        B(t);
      }),
      e.isVertical
        ? ((e.$track.style.height = n.verH + u),
          e.$slides.forEach(function (t) {
            n && (t.style.height = n.verH / n._2Show + u);
          }))
        : e.$slides.forEach(function (t) {
            t.style.width = e.slideWidth + u;
          });
    for (var t = 0; t < e.$slides.length; t += n._2Scroll)
      m.push(e.$slides.slice(t, t + n._2Scroll));
    m.forEach(function (t) {
      (o = document.createElement("div")),
        W(o, i.slice(1, -1), "true"),
        A(t, o),
        e.isVertical
          ? e.pts.push(
              e.isRtl ? z(e.$trackMask, o).bottom : z(e.$trackMask, o).top
            )
          : e.pts.push(
              e.isRtl ? z(e.$trackMask, o).right : z(e.$trackMask, o).left
            );
    });
  }
  function s(t, e) {
    var n, r, o, i, a, s, c, l, u, d;
    return (
      (a = e),
      (s = Object.keys(a)),
      (c = Object.keys(x)),
      (l = []),
      (u = []),
      (d = []),
      !(
        s.filter(function (t) {
          return -1 === c.indexOf(t);
        }).length ||
        (null != (s = a.breakpoints) &&
          s.forEach(function (t) {
            t.minWidth && l.push(t.minWidth);
          }),
        null != l &&
          l.forEach(function (t) {
            (d.includes(t) && !u.includes(t) ? u : d).push(t);
          }),
        0 < u.length)
      ) &&
      ("function" == typeof e.beforeInitFn && e.beforeInitFn(),
      (t = {
        $: t,
        $arrowsWrap: f(t, "[data-carouzelnxt-arrowswrapper]"),
        $curPage: f(t, "[data-carouzelnxt-currentpage]"),
        $nav: { el: f(t, "[data-carouzelnxt-navigation]"), isActive: !1 },
        $navWrap: f(t, "[data-carouzelnxt-navigationwrapper]"),
        $nextBtn: { el: f(t, "[data-carouzelnxt-nextarrow]"), isActive: !1 },
        $pageWrap: f(t, "[data-carouzelnxt-pageinfo]"),
        $prevBtn: {
          el: f(t, "[data-carouzelnxt-previousarrow]"),
          isActive: !1,
        },
        $slides: _(t, "[data-carouzelnxt-slide]"),
        $totPage: f(t, "[data-carouzelnxt-totalpages]"),
        $track: f(t, "[data-carouzelnxt-track]"),
        $trackMask: f(t, "[data-carouzelnxt-trackmask]"),
        eH: [],
        isKeydown: !1,
        isMousedown: !1,
        isRtl: !1,
        isVertical: !1,
        o:
          ((a = {
            _2Scroll: (r = e).slidesToScroll,
            _2Show: r.slidesToShow,
            _arrows: r.showArrows,
            _nav: r.showNavigation,
            _urlH: r.trackUrlHash,
            aSFn: r.afterScrollFn,
            auto: r.autoplay,
            bps: [],
            bSFn: r.beforeScrollFn,
            cntr: r.centerBetween,
            effect: r.effect,
            gutr: r.slideGutter,
            inf: r.isInfinite,
            pauseHov: r.pauseOnHover,
            scbar: r.showScrollbar,
            startAt: r.startAt,
            useTitle: r.useTitlesAsDots,
            verH: r.verticalHeight,
          }),
          (s = $.filter(function (t) {
            return t.name === r.effect;
          })[0]),
          (a.effect = s.cls || $[0].cls),
          (s = {
            _2Scroll: r.slidesToScroll,
            _2Show: r.slidesToShow,
            _arrows: r.showArrows,
            _nav: r.showNavigation,
            cntr: r.centerBetween,
            dots: [],
            gutr: r.slideGutter,
            minW: 0,
            nDups: [],
            pDups: [],
            scbar: r.showScrollbar,
            verH: r.verticalHeight,
          }),
          r.breakpoints && 0 < r.breakpoints.length
            ? ((t = r.breakpoints.sort(function (t, e) {
                return t.minWidth - e.minWidth;
              })),
              (o = 0),
              (i = []).push(s),
              t.forEach(function (t, e) {
                (0 === t.minWidth && 0 === e) ||
                  (i.push({
                    _2Scroll: t.slidesToScroll || i[o]._2Scroll,
                    _2Show: t.slidesToShow || i[o]._2Show,
                    _arrows: t.showArrows || i[o]._arrows,
                    _nav: t.showNavigation || i[o]._nav,
                    cntr: t.centerBetween || i[o].cntr,
                    gutr: t.slideGutter || i[o].gutr,
                    minW: t.minWidth,
                    scbar: t.showScrollbar || i[o].scbar,
                    verH: t.verticalHeight || i[o].verH,
                  }),
                  o++);
              }),
              (a.bps = i.sort(function (t, e) {
                return t.minW - e.minW;
              })))
            : a.bps.push(s),
          a.effect === $[1].cls &&
            ((a.scbar = !1),
            a.bps.forEach(function (t) {
              t.scbar = !1;
            })),
          a),
        pts: [],
        scrlWidth: 0,
        slideWidth: 0,
      }).$arrowsWrap) &&
      t.$curPage &&
      t.$nav &&
      t.$navWrap &&
      t.$nextBtn &&
      t.$pageWrap &&
      t.$prevBtn &&
      t.$totPage &&
      t.$track &&
      t.$trackMask
        ? ("string" ==
            typeof (s = t.$.getAttribute(
              "[data-carouzelnxt-rtl]".slice(1, -1)
            )) &&
            -1 < s.length &&
            (t.isRtl = !0),
          "string" ==
            typeof (a = t.$.getAttribute(
              "[data-carouzelnxt-vertical]".slice(1, -1)
            )) &&
            -1 < a.length &&
            (t.isVertical = !0),
          (t.o.auto ? y : S)(t.$, h),
          (t.$track.tabIndex = 0),
          t.o.bps.forEach(function (t) {
            console.log(t._2Show);
          }),
          y((n = t).$, n.o.effect),
          y(n.$arrowsWrap, b),
          y(n.$navWrap, b),
          y(n.$pageWrap, b),
          T(v.n, n, !1),
          T(v.p, n, !1),
          n.eH.push(
            H(n.$nextBtn.el, g.c, function (t) {
              F(t, n);
            })
          ),
          n.eH.push(
            H(n.$prevBtn.el, g.c, function (t) {
              M(t, n);
            })
          ),
          n.eH.push(
            H(n.$track, g.md, function () {
              n.isMousedown = !0;
            })
          ),
          n.eH.push(
            H(n.$track, g.mu, function (t) {
              (n.isMousedown = !1), E(t, n);
            })
          ),
          n.eH.push(
            H(n.$track, g.kd, function () {
              n.isKeydown = !0;
            })
          ),
          n.eH.push(
            H(n.$track, g.ku, function (t) {
              (n.isKeydown = !1), E(t, n);
            })
          ),
          p(t),
          "function" == typeof e.afterInitFn && e.afterInitFn(),
          t)
        : null
    );
  }
  var o,
    n,
    c = "[data-carouzelnxt-auto]",
    i = "[data-carouzelnxt-group]",
    h = "__carouzelnxt-autoplay",
    v = { n: "next", p: "prev" },
    l = "__carouzelnxt-disabled",
    $ = [
      { name: "scroll", cls: "__carouzelnxt-scroll" },
      { name: "fade", cls: "__carouzelnxt-fade" },
    ],
    g = {
      c: "click",
      kd: "keydown",
      ku: "keyup",
      md: "mousedown",
      mu: "mouseup",
      t: "tab",
    },
    b = "__carouzelnxt-hidden",
    u = "px",
    d = {},
    w = window,
    k = 0,
    m = [],
    x = {
      afterInitFn: void 0,
      afterScrollFn: void 0,
      animationSpeed: 5e3,
      autoplay: !1,
      beforeInitFn: void 0,
      beforeScrollFn: void 0,
      breakpoints: [],
      centerBetween: 0,
      effect: "scroll",
      isInfinite: !0,
      pauseOnHover: !1,
      showArrows: !0,
      showNavigation: !0,
      showScrollbar: !0,
      slideGutter: 0,
      slidesToScroll: 1,
      slidesToShow: 1,
      startAt: 0,
      trackUrlHash: !1,
      useTitlesAsDots: !1,
      verticalHeight: 500,
    },
    _ = function (t, e) {
      return Array.prototype.slice.call(t.querySelectorAll(e) || []);
    },
    y = function (t, e) {
      (t = t.classList).add.apply(t, e.split(" "));
    },
    S = function (t, e) {
      (t = t.classList).remove.apply(t, e.split(" "));
    },
    W = function (t, e, n) {
      t.setAttribute(e, n);
    },
    A = function (t, e) {
      t.length && t[0].parentNode && t[0].parentNode.insertBefore(e, t[0]),
        t.forEach(function (t) {
          e.appendChild(t);
        });
    },
    B = function (t) {
      if (t && t.parentNode) {
        for (; t.firstChild; ) t.parentNode.insertBefore(t.firstChild, t);
        t.remove();
      }
    },
    z = function (t, e) {
      (t = t.getBoundingClientRect()), (e = e.getBoundingClientRect());
      return {
        bottom: e.bottom - t.bottom,
        height: e.height,
        left: e.left - t.left,
        right: e.right - t.right,
        top: e.top - t.top,
        width: e.width,
        x: e.x - t.x,
        y: e.y - t.y,
      };
    },
    H = function (t, e, n) {
      var r = {
        element: t,
        remove: function () {
          t.removeEventListener(e, n, !1);
        },
      };
      return t.addEventListener(e, n, !1), r;
    },
    E = function (t, e) {
      t instanceof KeyboardEvent &&
        console.log("================", t.key, z(e.$, e.$track));
    },
    T = function (t, e, n) {
      void 0 === n && (n = !1),
        t === v.n &&
          ((e.$nextBtn.isActive = n)
            ? (S(e.$nextBtn.el, l), r(e.$nextBtn.el, "disabled"))
            : (y(e.$nextBtn.el, l), W(e.$nextBtn.el, "disabled", "disabled"))),
        t === v.p &&
          ((e.$prevBtn.isActive = n)
            ? (S(e.$prevBtn.el, l), r(e.$prevBtn.el, "disabled"))
            : (y(e.$prevBtn.el, l), W(e.$prevBtn.el, "disabled", "disabled")));
    },
    F = function (t, e) {
      e.$nextBtn.isActive &&
        (t.preventDefault(), console.log("==========next"));
    },
    M = function (t, e) {
      e.$prevBtn.isActive &&
        (t.preventDefault(), console.log("==========prev"));
    },
    I =
      ((N.getInstance = function () {
        return (N.instance = N.instance ? N.instance : new N());
      }),
      (N.prototype.initGlobal = function () {
        this.init(!0, "");
      }),
      (N.prototype.init = function (t, n) {
        var r,
          o = [],
          i = "boolean" == typeof t && t;
        return (
          _(document, i ? c : t.toString()).forEach(function (t) {
            var e =
              t.getAttribute("id") ||
              ""
                .concat("__carouzelnxt", "_")
                .concat(new Date().getTime(), "_root_")
                .concat(k++);
            W(t, "id", e),
              !d[e] &&
                ((r = i
                  ? JSON.parse(
                      (t.getAttribute(c.slice(1, -1)) || "").replace(/'/g, '"')
                    )
                  : n || {}),
                (t = s(t, a(x, r)))) &&
                o.push((d[e] = t));
          }),
          w.addEventListener("resize", e, !1),
          {
            addSlide: function (t) {
              console.log("=========================addslide", t);
            }.bind(this, o),
            destroy: function (t) {
              console.log("=========================destroy", t);
            }.bind(this, o),
            removeSlide: function (t) {
              console.log("=========================removeslide", t);
            }.bind(this, o),
          }
        );
      }),
      N);
  function N() {}
  I.getInstance().initGlobal(),
    (t.version = "1.0.0"),
    (t.init = I.getInstance().init);
})((CarouzelNXT = CarouzelNXT || {}));
